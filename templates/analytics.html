{% extends "base.html" %}

{% block title %}Analytics - Coding Practice System{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h1 class="h2 mb-0">
            <i class="fas fa-chart-bar me-2 text-primary"></i>
            Advanced Analytics
        </h1>
        <p class="text-muted">Detailed insights into your coding progress</p>
    </div>
</div>

<div class="row mb-4">
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Learning Velocity</h5>
            </div>
            <div class="card-body">
                <div id="velocity-chart" style="height: 300px;"></div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Skill Progression</h5>
            </div>
            <div class="card-body">
                <div id="skills-chart" style="height: 300px;"></div>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Knowledge Gaps</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <i class="fas fa-brain me-2"></i>
                    Advanced analytics are being processed. Use the API to access detailed insights:
                    <br><br>
                    <code>GET http://localhost:4500/api/analytics</code>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Quick Stats</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Learning Rate:</strong> <span class="text-success">+15%</span>
                </div>
                <div class="mb-3">
                    <strong>Retention:</strong> <span class="text-info">87%</span>
                </div>
                <div class="mb-3">
                    <strong>Focus Areas:</strong> <span class="text-warning">Dynamic Programming</span>
                </div>
                <a href="/" class="btn btn-primary w-100">
                    <i class="fas fa-arrow-left me-1"></i>Back to Dashboard
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Mock analytics charts
    if (typeof Plotly !== 'undefined') {
        // Velocity chart
        const velocityTrace = {
            x: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
            y: [3, 5, 4, 7],
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Problems/Week'
        };
        
        Plotly.newPlot('velocity-chart', [velocityTrace], {
            margin: { t: 20, r: 20, b: 40, l: 40 }
        }, {responsive: true});
        
        // Skills chart
        const skillsTrace = {
            labels: ['Arrays', 'Trees', 'Graphs', 'DP', 'Strings'],
            values: [85, 72, 68, 45, 90],
            type: 'pie',
            hole: 0.4
        };
        
        Plotly.newPlot('skills-chart', [skillsTrace], {
            margin: { t: 20, r: 20, b: 20, l: 20 }
        }, {responsive: true});
    }
});
</script>
{% endblock %} 